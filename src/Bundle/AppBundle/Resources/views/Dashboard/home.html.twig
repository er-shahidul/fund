{% extends "layout.html.twig" %}

{% block body %}
    <div class="wrapper-breadcrumb">

        <section id="breadcrumb" class="breadcrumb wpo-breadcrumb" style="background: #F0F0F0 url() no-repeat 0 0;">
            <nav class="container"><a href="/">Home</a>
                <span class="delimiter">/</span>
                <a href="{{ path('campaign_list') }}">Campaign</a>
                <div class="breadcrumb-name"><span><span class="current"><span
                                    itemprop="name">{{ campaign.title|default }}</span></span> </span>
                </div>
            </nav>
        </section>
    </div>
    <div class="row">
        <!-- MAIN CONTENT -->
        <div id="wpo-content" class="col-xs-12 no-sidebar">
            <article id="post-2837" class="clearfix post-2837 page type-page status-publish hentry">

                <section class="wpb-container vc_custom_1421986226710">
                    <div class="wpb-inner container">
                        <div class="row">
                            <div class="col-sm-12 wpb_column vc_column_container wpb_animate_when_almost_visible wpb_bottom-to-top">

                                <div class="wpb_wrapper  vc_custom_1425354912163">
                                    <div class="widget campaigns-tab-featured">
                                        <h3 class="widget-title font-size-md separator_align_left ">
                                            <span>FEATURED CAMPAIGN</span>
                                        </h3>
                                        <div class="widget-content">
                                            <div class="carousel slide" id="carousel-vJu4D"
                                                 data-ride="carousel">
                                                <div class="carousel-inner" role="listbox">
                                                    {% for index, campaign in featureCampaigns %}
                                                        <div class="item {{ index == 0 ? 'active' :''  }}">
                                                            <div class="item-campaign row item-layout-1">
                                                                <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                                                    <div class="entry-thumbnail">

                                                                        <img src='{% render url('campaign_get_image', {'id': campaign.id}) %}'  class='attachment-thumbnails-crowdfunding wp-post-image'>
                                                                    </div>
                                                                    <div class="campaign-title">
                                                                        <a href="{{ path('campaign_detail',{id:campaign.id}) }}"
                                                                           title="{{ campaign.title }}"><span>{{ campaign.title|default('N/A') }}</span></a>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4 col-md-3 col-sm-6 col-xs-12">
                                                                    <div class="entry-description">
                                                                        <p>
                                                                            {{ campaign.description|readmore(path('campaign_detail',{id:campaign.id}),200)}}
                                                                        </p>
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4 col-md-5 col-sm-12 col-xs-12">
                                                                    <div class="row">
                                                                        <div class="barometer-main">
                                                                            <div
                                                                                    class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                                                                                <div class="barometer"
                                                                                     data-progress="40"
                                                                                     data-width="148"
                                                                                     data-height="148"
                                                                                     data-strokewidth="11"
                                                                                     data-stroke="#FFF"
                                                                                     data-progress-stroke="#FED857">
                                                                                <span>
                                                                                    {% render url('campaign_get_progress_bar', {'id': campaign.id}) %}
                                                                                </span>
                                                                                </div>
                                                                                <div
                                                                                        class="campaign-time-left text-center">
                                                                                    <span class="title">Expired on<br/>{{ campaign.endOfCampaignDate|time_diff }}</span><span></span>
                                                                                </div>
                                                                            </div>

                                                                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 xs-text-center">

                                                                                <ul class="campaign-status text-center">

                                                                                    <li class="campaign-raised">
                                                                                        <span class="label">Current</span><div class="clearfix"></div>
                                                                                        <span class="text">&#036;{% render url('campaign_get_target_amount', {'id': campaign.id}) %}</span>
                                                                                    </li>

                                                                                    <li class="campaign-goal">
                                                                                        <p class="label">Target</p>
                                                                                        <p class="text">&#036;{{ campaign.amount|default('') }}</p>
                                                                                    </li>

                                                                                    <li class="campaign-backers">
                                                                                        <span class="label">Backers</span>
                                                                                        <span class="text">{% render url('campaign_get_backers', {'id': campaign.id}) %}</span>
                                                                                    </li>
                                                                                </ul>

                                                                            </div>

                                                                            <div class="col-xs-12">
                                                                                <div class = "text-center quick-donate">
                                                                                    <a href="{{ path('donation_create',{id:campaign.id}) }}" class="btn btn-donate-black">
                                                                                        Donate now
                                                                                    </a>

                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endfor %}

                                                </div>
                                                <div class="clearfix"></div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <section class="wpb-container vc_custom_1421986226710">
                    <div class="wpb-inner container">
                        <div class="row">
                            <form action="{% if categoryTitle.id is not defined %}
                            {{ path('campaign_search') }}
                            {% else %}
                            {{ path('campaign_search_category_wise',{id:categoryTitle.id}) }}
                            {% endif %}" class="form-horizontal" role="form" method="post">
                                <div class="form-group" style="margin-left:0px;">
                                    <div class="col-sm-10">
                                        {{ form_widget(form.search, { 'attr': {'class': 'form-control','style':'border-radius:13px',
                                            'placeholder': 'Search by name, keyword, or city...'} }) }}
                                    </div>
                                    <div class="col-sm-2">
                                        <button type="submit" style="line-height: 22px; width: 91%" class="btn btn-donate-black">Submit</button>
                                    </div>
                                </div>

                            </form>

                        </div>
                    </div>

                </section>
                <section class="wpb-container">
                    <div class="wpb-inner container">
                        <div class="row">
                            <div class="col-lg-3 col-md-4 col-sm-6 col-xs-12">
                                <div class="wpo-sidebar wpo-sidebar-left">
                                    <div class="sidebar-inner">

                                        <aside id="categories-9" class="widget  clearfix widget_categories"><h3 class="widget-title">GENERAL CATEGORIES</h3>
                                            <ul>
                                                {% for category in categories %}
                                                    <li class="cat-item">
                                                        <a href="{{ path('campaign_category_based',{title:category.title}) }}"
                                                           class="{% if categoryTitle.title|default == category.title %}active{% else  %}{% endif %}">
                                                            {{ category.title }} ( {% render url('campaign_count_categories_wise', {'id': category.id}) %} )
                                                        </a>

                                                    </li>
                                                {% endfor %}
                                                <li class="cat-item">
                                                    <a href="{{ path('campaign_featured_based') }}"class="">Feature ( {% render url('feature_campaign_count') %} )</a>
                                                </li>
                                            </ul>

                                        </aside>

                                    </div>
                                </div>

                            </div>
                            <div class="col-lg-9 col-md-8 col-sm-6 col-xs-12">
                                <div class="widget-content">
                                    {% if campaigns %}
                                        {% for campaign in campaigns %}
                                            <div class="item-campaign col-lg-4 col-md-4 col-sm-6 col-xs-12">

                                                <div class="item-content item-campaign-wrapper">
                                                    <div class="entry-thumbnail text-center">
                                                        <img src='{% render url('campaign_get_image', {'id': campaign.id}) %}'  class='attachment-thumbnails-crowdfunding wp-post-image'>

                                                        <div class="donate-now" style="{{ is_granted("ROLE_ADMIN") ?'left:30%' :'left:50%' }}">
                                                            <a href="{{ path('donation_create',{id:campaign.id}) }}" class="btn btn-slide">
                                                                Donate now
                                                            </a>&nbsp;
                                                           {# {% if is_granted("ROLE_ADMIN") %}
                                                                <a href="{{ path('campaign_individual_update',{id:campaign.id}) }}" class="btn btn-slide" style="float: right">Edit</a>
                                                            {% endif %}#}
                                                        </div>
                                                        {% render url('campaign_get_successfull', {'id': campaign.id}) %}
                                                    </div>
                                                    <div class="campaign-main">
                                                        <ul class="campaign-status text-center">

                                                            <li class="campaign-raised">
                                                                <span class="label">Current</span>
                                                                 <span class="text">&#036;{{ campaign.amount|default('') }}</span>
                                                            </li>

                                                            <li class="campaign-funded">
                                                                {% render url('campaign_get_progress_bar', {'id': campaign.id}) %}
                                                            </li>

                                                            <li class="campaign-backers">
                                                                <span class="label">Backers</span>
                                                                <span class="text">{% render url('campaign_get_backers', {'id': campaign.id}) %}</span>
                                                            </li>
                                                        </ul>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                    <div class="entry-title">
                                                        <a href="{{ path('campaign_detail',{id:campaign.id}) }}"
                                                           title="{{ campaign.title }}"><span>{{ campaign.title|default('N/A') }}</span></a>
                                                    </div>
                                                    <div class="clearfix"></div>
                                                    <div class="desciption text-center">
                                                        {{ campaign.description|readmore(path('campaign_detail',{id:campaign.id}),40)}}
                                                    </div>
                                                    <div class="entry-author text-center">
                                                        <span>By</span> <strong> {{ campaign.createdBy.profile.fullName|default('N/A')}}</strong>
                                                    </div>

                                                </div>

                                            </div>

                                        {% endfor %}

                                    {% else %}
                                        <div class="col-lg-8 col-md-8 col-sm-6 col-xs-12">
                                            First create Campaign
                                        </div>
                                    {% endif %}
                                    <div style="clear: both;"></div>
                                    <div class="col-lg-9 col-md-8 col-sm-6 col-xs-12">
                                    {{ knp_pagination_render(campaigns) }}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>
                <!--banner post-->
                <!--end banner post-->
            </article><!-- #post -->
        </div>
        <!-- //MAIN CONTENT -->
    </div>
{% endblock %}

